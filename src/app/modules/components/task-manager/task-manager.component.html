<div class="mt-2">

  <div class="grid surface-card border-bottom-1 surface-border p-3 shadow-1 mt-2">
    <div class="col-12 flex justify-content-between align-items-center">

      <div class="flex align-items-center gap-3">
        <div class="w-3rem h-3rem bg-blue-100 border-circle flex align-items-center justify-content-center">
          <i class="pi pi-user text-blue-600 text-xl"></i>
        </div>

        <div class="flex flex-column">
          <span class="text-600 text-sm">Bienvenido</span>
          <span class="text-900 font-semibold text-lg">{{user}}</span>
        </div>
      </div>

      <div class="flex align-items-center gap-3">

        <span class="logout-text font-medium text-red-600 hidden md:inline-flex align-items-center gap-2">
          <i class="pi pi-sign-out text-sm"></i>
          Cerrar SesiÃ³n
        </span>

        <button pButton pRipple icon="pi pi-power-off"
          class="logout-btn p-button-danger p-button-outlined p-button-rounded shadow-2 hover:shadow-5 transition-all"
          (click)="logout()" pTooltip="Cerrar sesiÃ³n" tooltipPosition="left"
          style="border-radius: 50%; width: 48px; height: 48px;">
        </button>
      </div>
    </div>
  </div>
  <div class="grid surface-card border-bottom-1 surface-border p-3 shadow-1 mt-2">
    <div class="col-12 md:col-3">
      <div class="border-1 surface-border p-3 border-round-md flex flex-column gap-3">
        <button pButton pRipple class="p-button-outlined font-semibold" icon="pi pi-plus" label="Agregar tarea"
          (click)="openFormTask()">
        </button>
        <div class="flex flex-column gap-1">
          <div (click)="onSelectStatus(status.title)" *ngFor="let status of statuses"
            class="flex justify-content-between align-items-center border-1 border-transparent border-round-md p-3 -mx-2 cursor-pointer hover:surface-hover"
            [ngClass]="{'bg-primary-50 border-primary-100':statusSelected === status.title }">
            <div class="flex align-items-center gap-3">
              <div style="width:7px;height:7px;" class="border-circle" [class]="status.badgeClass"></div>
              <span>{{status.title}}</span>
            </div>
            <div class="flex gap-2 align-items-center">
              <i *ngIf="statusSelected === status.title" class="pi pi-chevron-right text-primary"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 md:col-9">
      <div class="">
        <div class="flex justify-content-between align-items-center mb-1">
        </div>
        <p-accordion [multiple]="true" [activeIndex]="[0]">
          @if(statusSelected=="Todas" || statusSelected=="Pendientes"){
          <p-accordionTab>
            <ng-template pTemplate="header">
              <div class="flex align-items-center gap-2">
                <span class="font-semibold text-lg">
                  Tareas Pendientes
                </span>
                <p-badge [value]="todo.length.toString()" severity="warning">
                </p-badge>

              </div>
            </ng-template>
            <app-task-list [taskList]="todo" (editTask)="openFormTask($event)" (deleteTask)="onDeleteTask($event)" (completeTask)="onCompleteTask($event)">
            </app-task-list>
          </p-accordionTab>
          }
          @if(statusSelected=="Todas" || statusSelected=="Completadas"){
          <p-accordionTab>
            <ng-template pTemplate="header">
              <div class="flex align-items-center gap-2">
                <span class="font-semibold text-lg">
                  Tareas Completadas
                </span>

                <p-badge [value]="completed.length.toString()" severity="success">
                </p-badge>

              </div>
            </ng-template>
            <app-task-list [taskList]="completed" (editTask)="openFormTask($event)" (deleteTask)="onDeleteTask($event)" (completeTask)="onCompleteTask($event)">
            </app-task-list>
          </p-accordionTab>

          }

        </p-accordion>

      </div>

    </div>
  </div>
</div>